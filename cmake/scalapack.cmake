if(NOT DEFINED SCALAPACK_COMPONENTS AND DEFINED ENV{MKLROOT})
  set(SCALAPACK_COMPONENTS MKL)
endif()

if(MKL IN_LIST SCALAPACK_COMPONENTS)
  if(intsize64)
    list(APPEND SCALAPACK_COMPONENTS MKL64)
  endif()
endif()

if(find_static)
  set(_orig_suff ${CMAKE_FIND_LIBRARY_SUFFIXES})
  set(CMAKE_FIND_LIBRARY_SUFFIXES ${CMAKE_STATIC_LIBRARY_SUFFIX})
endif()
find_package(SCALAPACK REQUIRED COMPONENTS ${SCALAPACK_COMPONENTS})
if(find_static)
  set(CMAKE_FIND_LIBRARY_SUFFIXES ${_orig_suff})
endif()
